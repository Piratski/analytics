{
	"annotations": {
		"list": [
			{
				"builtIn": 1,
				"datasource": {
					"type": "grafana",
					"uid": "-- Grafana --"
				},
				"enable": true,
				"hide": true,
				"iconColor": "rgba(0, 211, 255, 1)",
				"name": "Annotations & Alerts",
				"type": "dashboard"
			}
		]
	},
	"editable": false,
	"fiscalYearStartMonth": 0,
	"graphTooltip": 0,
	"links": [],
	"liveNow": false,
	"panels": [
		{
			"datasource": {
				"type": "grafana-clickhouse-datasource",
				"uid": "{{ .DatasourceClickhouseUid }}"
			},
			"description": "<ul>\n\t<li>\n\t\t<span style=\"font-weight: bold\">Unique visitors</span>: Number of people who visited your site.\n\t</li>\n\t<li>\n\t\t<span style=\"font-weight: bold\">Unique sessions</span>: Number of visit on your site.\n\t</li>\n\t<li>\n\t\t<span style=\"font-weight: bold\">Total page views</span>: Number of page viewed on your site.\n\t</li>\n\t<li>\n\t\t<span style=\"font-weight: bold\">Views per sessions</span>: Number of page viewed per session on your site.\n\t</li>\n</ul>\n<span style=\"font-weight: bold\">Change</span> panels shows evolution of metrics compared to previous period.\n",
			"fieldConfig": {
				"defaults": {
					"color": {
						"mode": "thresholds"
					},
					"fieldMinMax": true,
					"mappings": [],
					"noValue": "0",
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "purple",
								"value": null
							}
						]
					},
					"unit": "short"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "Page views over time Page views over time"
						},
						"properties": [
							{
								"id": "displayName",
								"value": "Total page views"
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "Page views change"
						},
						"properties": [
							{
								"id": "thresholds",
								"value": {
									"mode": "absolute",
									"steps": [
										{
											"color": "red",
											"value": null
										},
										{
											"color": "yellow",
											"value": -5
										},
										{
											"color": "blue",
											"value": 5
										}
									]
								}
							},
							{
								"id": "unit",
								"value": "percent"
							},
							{
								"id": "displayName",
								"value": "Change"
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "Sessions change"
						},
						"properties": [
							{
								"id": "unit",
								"value": "percent"
							},
							{
								"id": "thresholds",
								"value": {
									"mode": "absolute",
									"steps": [
										{
											"color": "red",
											"value": null
										},
										{
											"color": "yellow",
											"value": -5
										},
										{
											"color": "blue",
											"value": 5
										}
									]
								}
							},
							{
								"id": "displayName",
								"value": "Change"
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "Views per session change"
						},
						"properties": [
							{
								"id": "unit",
								"value": "percent"
							},
							{
								"id": "thresholds",
								"value": {
									"mode": "absolute",
									"steps": [
										{
											"color": "red",
											"value": null
										},
										{
											"color": "yellow",
											"value": -5
										},
										{
											"color": "blue",
											"value": 5
										}
									]
								}
							},
							{
								"id": "displayName",
								"value": "Change"
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "Sessions over time Sessions over time"
						},
						"properties": [
							{
								"id": "displayName",
								"value": "Total sessions"
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "Visitors change"
						},
						"properties": [
							{
								"id": "unit",
								"value": "percent"
							},
							{
								"id": "thresholds",
								"value": {
									"mode": "absolute",
									"steps": [
										{
											"color": "red",
											"value": null
										},
										{
											"color": "yellow",
											"value": -5
										},
										{
											"color": "blue",
											"value": 5
										}
									]
								}
							},
							{
								"id": "displayName",
								"value": "Change"
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 5,
				"w": 22,
				"x": 1,
				"y": 0
			},
			"id": 10,
			"maxDataPoints": 16,
			"options": {
				"colorMode": "background",
				"graphMode": "area",
				"justifyMode": "center",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": [
						"sum"
					],
					"fields": "",
					"values": false
				},
				"showPercentChange": false,
				"textMode": "auto",
				"wideLayout": true
			},
			"pluginVersion": "11.0.0",
			"targets": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": true,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.0.8",
					"queryType": "table",
					"rawSql": "SELECT COUNT(DISTINCT(visitor_id))\nFROM sessions\nWHERE exit_timestamp >= fromUnixTimestamp(toUnixTimestamp($__fromTime) - (toUnixTimestamp($__toTime) - toUnixTimestamp($__fromTime)))\nAND exit_timestamp <= $__fromTime\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})",
					"refId": "Total visitors previous period"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": false,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.1.0",
					"queryType": "table",
					"rawSql": "WITH visitors AS (\n  SELECT\n    argMax(visitor_id, pageviews) AS visitor_id\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT COUNT(DISTINCT(visitor_id)) AS \"Unique visitors\"\nFROM visitors",
					"refId": "Unique visitors"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "(${Unique visitors} / ${Total visitors previous period} - 1) * 100",
					"hide": false,
					"refId": "Visitors change",
					"type": "math"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": true,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.0.8",
					"queryType": "table",
					"rawSql": "SELECT COUNT(DISTINCT(session_uuid)) FROM sessions\nWHERE exit_timestamp >= fromUnixTimestamp(toUnixTimestamp($__fromTime) - (toUnixTimestamp($__toTime) - toUnixTimestamp($__fromTime)))\nAND exit_timestamp <= $__fromTime\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})",
					"refId": "Total sessions previous period"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": false,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.1.0",
					"queryType": "table",
					"rawSql": "WITH visitors AS (\n  SELECT session_uuid\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT COUNT(session_uuid) AS \"Unique sessions\"\nFROM visitors",
					"refId": "Unique sessions"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "(${Unique sessions} / ${Total sessions previous period} - 1) * 100",
					"hide": false,
					"refId": "Sessions change",
					"type": "math"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": true,
					"meta": {
						"builderOptions": {
							"aggregates": [],
							"columns": [],
							"database": "",
							"filters": [
								{
									"key": "timestamp",
									"operator": "WITH IN DASHBOARD TIME RANGE",
									"type": "datetime"
								}
							],
							"limit": 100,
							"mode": "trend",
							"queryType": "table",
							"table": "pageviews"
						}
					},
					"pluginVersion": "4.0.8",
					"queryType": "table",
					"rawSql": "SELECT COUNT(*)\nFROM pageviews\nWHERE timestamp >= fromUnixTimestamp(toUnixTimestamp($__fromTime) - (toUnixTimestamp($__toTime) - toUnixTimestamp($__fromTime)))\nAND timestamp <= $__fromTime\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND session_uuid IN (\n  SELECT session_uuid FROM sessions\n  WHERE exit_timestamp >= fromUnixTimestamp(toUnixTimestamp($__fromTime) - (toUnixTimestamp($__toTime) - toUnixTimestamp($__fromTime)))\n  AND exit_timestamp <= $__fromTime\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)",
					"refId": "Total page views previous period"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": false,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 100,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.1.0",
					"queryType": "table",
					"rawSql": "SELECT $__timeInterval(timestamp) AS time, COUNT(*)\nFROM pageviews\nWHERE $__timeFilter(timestamp)\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND session_uuid IN (\n  SELECT session_uuid FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nGROUP BY time\nORDER BY time",
					"refId": "Page views over time"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "Page views over time",
					"hide": true,
					"reducer": "sum",
					"refId": "Total page views",
					"settings": {
						"mode": "dropNN"
					},
					"type": "reduce"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "(${Total page views} / ${Total page views previous period} - 1) * 100",
					"hide": false,
					"refId": "Page views change",
					"type": "math"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "${Total page views} / ${Unique sessions}",
					"hide": false,
					"refId": "Views per session",
					"type": "math"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "${Total page views previous period} / ${Total sessions previous period}",
					"hide": true,
					"refId": "Views per session previous period",
					"type": "math"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "(${Views per session} / ${Views per session previous period} - 1) * 100",
					"hide": false,
					"refId": "Views per session change",
					"type": "math"
				}
			],
			"title": "Summary",
			"transparent": true,
			"type": "stat"
		},
		{
			"datasource": {
				"type": "grafana-clickhouse-datasource",
				"uid": "{{ .DatasourceClickhouseUid }}"
			},
			"description": "Number of visitors in the last 15 minutes.",
			"fieldConfig": {
				"defaults": {
					"color": {
						"fixedColor": "blue",
						"mode": "fixed"
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							}
						]
					},
					"unit": "short"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 2,
				"w": 7,
				"x": 1,
				"y": 5
			},
			"id": 22,
			"options": {
				"colorMode": "background",
				"graphMode": "area",
				"justifyMode": "center",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": [
						"sum"
					],
					"fields": "",
					"values": false
				},
				"showPercentChange": false,
				"textMode": "value_and_name",
				"wideLayout": true
			},
			"pluginVersion": "11.0.0",
			"targets": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": false,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.0.8",
					"queryType": "table",
					"rawSql": "SELECT COUNT(DISTINCT(visitor_id)) AS \"Live visitors\"\nFROM sessions\nWHERE addMinutes(exit_timestamp, 15) > now()\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})",
					"refId": "A"
				}
			],
			"transparent": true,
			"type": "stat"
		},
		{
			"datasource": {
				"type": "grafana-clickhouse-datasource",
				"uid": "{{ .DatasourceClickhouseUid }}"
			},
			"description": "Percentage of sessions with a single page view.",
			"fieldConfig": {
				"defaults": {
					"color": {
						"fixedColor": "purple",
						"mode": "fixed"
					},
					"mappings": [],
					"noValue": "0",
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							},
							{
								"color": "red",
								"value": 80
							}
						]
					},
					"unit": "percent"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 2,
				"w": 8,
				"x": 8,
				"y": 5
			},
			"id": 23,
			"options": {
				"colorMode": "background",
				"graphMode": "area",
				"justifyMode": "center",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": [
						"lastNotNull"
					],
					"fields": "",
					"values": false
				},
				"showPercentChange": false,
				"textMode": "auto",
				"wideLayout": true
			},
			"pluginVersion": "11.0.0",
			"targets": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": true,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.3.1",
					"queryType": "table",
					"rawSql": "WITH bounces AS (\n  SELECT argMax(pageviews, pageviews) AS pageviews\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n  HAVING pageviews = 1\n)\nSELECT COUNT(*) AS bounces FROM bounces",
					"refId": "Total number of sessions with a single pageview"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": true,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.0.8",
					"queryType": "table",
					"rawSql": "SELECT COUNT(DISTINCT(session_uuid))\nFROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})",
					"refId": "Total number of sessions"
				},
				{
					"datasource": {
						"name": "Expression",
						"type": "__expr__",
						"uid": "__expr__"
					},
					"expression": "${Total number of sessions with a single pageview} / ${Total number of sessions} * 100",
					"hide": false,
					"refId": "Bounce rate",
					"type": "math"
				}
			],
			"transparent": true,
			"type": "stat"
		},
		{
			"datasource": {
				"type": "grafana-clickhouse-datasource",
				"uid": "{{ .DatasourceClickhouseUid }}"
			},
			"description": "Average session duration (bounces and live visitors excluded).",
			"fieldConfig": {
				"defaults": {
					"color": {
						"fixedColor": "blue",
						"mode": "fixed"
					},
					"mappings": [],
					"thresholds": {
						"mode": "absolute",
						"steps": [
							{
								"color": "green",
								"value": null
							}
						]
					},
					"unit": "s"
				},
				"overrides": []
			},
			"gridPos": {
				"h": 2,
				"w": 7,
				"x": 16,
				"y": 5
			},
			"id": 24,
			"options": {
				"colorMode": "background",
				"graphMode": "area",
				"justifyMode": "center",
				"orientation": "auto",
				"reduceOptions": {
					"calcs": [
						"sum"
					],
					"fields": "",
					"values": false
				},
				"showPercentChange": false,
				"textMode": "value_and_name",
				"wideLayout": true
			},
			"pluginVersion": "11.0.0",
			"targets": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.0.8",
					"queryType": "table",
					"rawSql": "WITH sessions_duration AS (\n  SELECT argMax(exit_timestamp, pageviews) - argMax(session_timestamp, pageviews) AS duration\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  AND session_timestamp != exit_timestamp\n  GROUP BY session_uuid\n)\nSELECT avg(duration) AS \"Average session duration\"\nFROM sessions_duration\n",
					"refId": "A"
				}
			],
			"type": "stat"
		},
		{
			"datasource": {
				"type": "grafana-clickhouse-datasource",
				"uid": "{{ .DatasourceClickhouseUid }}"
			},
			"description": "Number of page views, sessions and visitors over time.",
			"fieldConfig": {
				"defaults": {
					"color": {
						"fixedColor": "blue",
						"mode": "palette-classic",
						"seriesBy": "max"
					},
					"custom": {
						"axisBorderShow": false,
						"axisCenteredZero": false,
						"axisColorMode": "text",
						"axisLabel": "",
						"axisPlacement": "auto",
						"barAlignment": 0,
						"drawStyle": "line",
						"fillOpacity": 100,
						"gradientMode": "opacity",
						"hideFrom": {
							"legend": false,
							"tooltip": false,
							"viz": false
						},
						"insertNulls": false,
						"lineInterpolation": "linear",
						"lineStyle": {
							"fill": "solid"
						},
						"lineWidth": 1,
						"pointSize": 5,
						"scaleDistribution": {
							"type": "linear"
						},
						"showPoints": "always",
						"spanNulls": false,
						"stacking": {
							"group": "A",
							"mode": "none"
						},
						"thresholdsStyle": {
							"mode": "off"
						}
					},
					"fieldMinMax": true,
					"mappings": [],
					"noValue": "No data to display. Adjust filters or visit your website to generate your first page view event.",
					"thresholds": {
						"mode": "percentage",
						"steps": [
							{
								"color": "purple",
								"value": null
							}
						]
					},
					"unit": "short"
				},
				"overrides": [
					{
						"matcher": {
							"id": "byName",
							"options": "Pageviews Pageviews"
						},
						"properties": [
							{
								"id": "displayName",
								"value": "Page views"
							},
							{
								"id": "color",
								"value": {
									"fixedColor": "blue",
									"mode": "fixed"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "Sessions Sessions"
						},
						"properties": [
							{
								"id": "displayName",
								"value": "Sessions"
							},
							{
								"id": "color",
								"value": {
									"fixedColor": "dark-blue",
									"mode": "fixed"
								}
							}
						]
					},
					{
						"matcher": {
							"id": "byName",
							"options": "Visitors Visitors"
						},
						"properties": [
							{
								"id": "displayName",
								"value": "Visitors"
							},
							{
								"id": "color",
								"value": {
									"fixedColor": "purple",
									"mode": "fixed"
								}
							}
						]
					}
				]
			},
			"gridPos": {
				"h": 12,
				"w": 22,
				"x": 1,
				"y": 7
			},
			"id": 6,
			"maxDataPoints": 16,
			"options": {
				"legend": {
					"calcs": [],
					"displayMode": "list",
					"placement": "bottom",
					"showLegend": true
				},
				"tooltip": {
					"maxHeight": 600,
					"mode": "multi",
					"sort": "asc"
				}
			},
			"targets": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.1.0",
					"queryType": "table",
					"rawSql": "SELECT $__timeInterval(timestamp) AS time, COUNT(*) AS \"Pageviews\"\nFROM pageviews\nWHERE $__timeFilter(timestamp)\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND session_uuid IN (\n  SELECT session_uuid FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nGROUP BY time\nORDER BY time",
					"refId": "Pageviews"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": false,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.1.0",
					"queryType": "table",
					"rawSql": "SELECT $__timeInterval(session_timestamp) AS time, COUNT(*) AS \"Sessions\"\nFROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\nGROUP BY time\nORDER BY time",
					"refId": "Sessions"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"editorType": "sql",
					"format": 1,
					"hide": false,
					"meta": {
						"builderOptions": {
							"columns": [],
							"database": "",
							"limit": 1000,
							"mode": "list",
							"queryType": "table",
							"table": ""
						}
					},
					"pluginVersion": "4.1.0",
					"queryType": "table",
					"rawSql": "SELECT\n  $__timeInterval(entry_timestamp) AS time,\n  COUNT(DISTINCT(visitor_id)) AS \"Visitors\"\nFROM sessions\nWHERE ($__timeFilter(session_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\nGROUP BY time\nORDER BY time",
					"refId": "Visitors"
				}
			],
			"title": "Time Series",
			"type": "timeseries"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 19
			},
			"id": 30,
			"panels": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Top 10 of traffic sources.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "continuous-BlPu"
							},
							"displayName": "${__field.labels[referrer_domain]}",
							"fieldMinMax": false,
							"mappings": [],
							"thresholds": {
								"mode": "percentage",
								"steps": [
									{
										"color": "super-light-blue",
										"value": null
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 12,
						"w": 11,
						"x": 1,
						"y": 20
					},
					"id": 13,
					"options": {
						"displayMode": "lcd",
						"maxVizHeight": 41,
						"minVizHeight": 25,
						"minVizWidth": 8,
						"namePlacement": "auto",
						"orientation": "horizontal",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "",
							"limit": 10,
							"values": true
						},
						"showUnfilled": true,
						"sizing": "manual",
						"valueMode": "text"
					},
					"pluginVersion": "11.0.0",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 100,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH referrals AS (\n  SELECT argMax(referrer_domain, pageviews) AS referrer_domain\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT referrer_domain, COUNT(*) AS session_count\nFROM referrals\nWHERE $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nGROUP BY referrer_domain\nORDER BY session_count DESC",
							"refId": "A"
						}
					],
					"title": "Top Sources",
					"transformations": [
						{
							"id": "rowsToFields",
							"options": {
								"mappings": [
									{
										"fieldName": "referrer_domain",
										"handlerKey": "field.name"
									},
									{
										"fieldName": "count",
										"handlerKey": "field.value"
									}
								]
							}
						}
					],
					"type": "bargauge"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "<ul>\n\t<li>\n\t\t<span style=\"font-weight: bold\">Direct</span>: Traffic from visitors who directly enter your website's URL or domain name into their browser or search engine, without clicking on a link from another site.\n\t</li>\n\t<li>\n\t\t<span style=\"font-weight: bold\">Internal</span>: Traffic from visitors who navigate within your website by clicking on internal links, moving from one page to another, or engaging with specific content or features.\n\t</li>\n\t<li>\n\t\t<span style=\"font-weight: bold\">External</span>: Traffic from visitors who arrive at your website via external sources, such as search engines, social media platforms, other websites, or email marketing campaigns.\n\t</li>\n</ul>\n",
					"fieldConfig": {
						"defaults": {
							"color": {
								"fixedColor": "purple",
								"mode": "shades"
							},
							"custom": {
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								}
							},
							"mappings": [],
							"unit": "short"
						},
						"overrides": [
							{
								"matcher": {
									"id": "byName",
									"options": "Direct"
								},
								"properties": [
									{
										"id": "color",
										"value": {
											"fixedColor": "#7253cf",
											"mode": "fixed"
										}
									}
								]
							},
							{
								"matcher": {
									"id": "byName",
									"options": "External"
								},
								"properties": [
									{
										"id": "color",
										"value": {
											"fixedColor": "semi-dark-purple",
											"mode": "fixed"
										}
									},
									{
										"id": "displayName",
										"value": "External"
									}
								]
							}
						]
					},
					"gridPos": {
						"h": 12,
						"w": 11,
						"x": 12,
						"y": 20
					},
					"id": 19,
					"options": {
						"displayLabels": [
							"percent",
							"name"
						],
						"legend": {
							"displayMode": "list",
							"placement": "bottom",
							"showLegend": true,
							"values": []
						},
						"pieType": "pie",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "",
							"values": true
						},
						"tooltip": {
							"maxHeight": 600,
							"mode": "single",
							"sort": "none"
						}
					},
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 1000,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.3.1",
							"queryType": "table",
							"rawSql": "SELECT COUNT(*) AS \"Internal\"\nFROM pageviews\nWHERE $__timeFilter(timestamp)\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND session_uuid IN (\n  SELECT session_uuid\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\n",
							"refId": "internal"
						},
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"hide": false,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 1000,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH referrals AS (\n  SELECT argMax(referrer_domain, pageviews) AS referrer\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT COUNT(*) AS \"Direct\"\nFROM referrals\nWHERE referrer = 'direct'\n\n",
							"refId": "direct"
						},
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"hide": false,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 1000,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH referrals AS (\n  SELECT argMax(referrer_domain, pageviews) AS referrer\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT COUNT(*) AS \"External\"\nFROM referrals\nWHERE referrer != 'direct'",
							"refId": "external"
						}
					],
					"title": "Traffic Sources",
					"type": "piechart"
				}
			],
			"title": "Sources",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 20
			},
			"id": 28,
			"panels": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Top 10 of most visited entry pages.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "continuous-BlPu"
							},
							"displayName": "${__field.labels[path]}",
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green",
										"value": null
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 7,
						"x": 1,
						"y": 33
					},
					"id": 25,
					"options": {
						"displayMode": "lcd",
						"maxVizHeight": 41,
						"minVizHeight": 25,
						"minVizWidth": 8,
						"namePlacement": "auto",
						"orientation": "horizontal",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "",
							"limit": 10,
							"values": true
						},
						"showUnfilled": true,
						"sizing": "manual",
						"valueMode": "color"
					},
					"pluginVersion": "11.0.0",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 1000,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH entry_pageviews AS (\n  SELECT argMax(entry_path, pageviews) AS path\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT path, COUNT(*) AS session_count\nFROM entry_pageviews\nGROUP BY path\nORDER BY session_count DESC",
							"refId": "A"
						}
					],
					"title": "Top Entry Pages",
					"type": "bargauge"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Top 10 of most visited pages.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "continuous-BlPu"
							},
							"displayName": "${__field.labels[path]}",
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green",
										"value": null
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 8,
						"x": 8,
						"y": 33
					},
					"id": 14,
					"options": {
						"displayMode": "lcd",
						"maxVizHeight": 41,
						"minVizHeight": 25,
						"minVizWidth": 8,
						"namePlacement": "auto",
						"orientation": "horizontal",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "",
							"limit": 10,
							"values": true
						},
						"showUnfilled": true,
						"sizing": "manual",
						"valueMode": "color"
					},
					"pluginVersion": "11.0.0",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 100,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "SELECT path, COUNT(*) AS pageviews\nFROM pageviews\nWHERE $__timeFilter(timestamp)\nAND session_uuid IN (\n  SELECT argMax(session_uuid, pageviews) FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nGROUP BY path\nORDER BY pageviews DESC",
							"refId": "A"
						}
					],
					"title": "Top Pages",
					"transformations": [
						{
							"id": "rowsToFields",
							"options": {
								"mappings": [
									{
										"fieldName": "path",
										"handlerKey": "field.name"
									},
									{
										"fieldName": "pageviews",
										"handlerKey": "field.value"
									}
								]
							}
						}
					],
					"type": "bargauge"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Top 10 of most visited exit pages.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "continuous-BlPu"
							},
							"displayName": "${__field.labels[path]}",
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green",
										"value": null
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 7,
						"x": 16,
						"y": 33
					},
					"id": 26,
					"options": {
						"displayMode": "lcd",
						"maxVizHeight": 41,
						"minVizHeight": 25,
						"minVizWidth": 8,
						"namePlacement": "auto",
						"orientation": "horizontal",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "",
							"limit": 10,
							"values": true
						},
						"showUnfilled": true,
						"sizing": "manual",
						"valueMode": "color"
					},
					"pluginVersion": "11.0.0",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 1000,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH exit_pageviews AS (\n  SELECT argMax(exit_path, pageviews) AS path\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT path, COUNT(*) AS pageviews\nFROM exit_pageviews\nGROUP BY path\nORDER BY pageviews DESC",
							"refId": "A"
						}
					],
					"title": "Top Exit Pages",
					"type": "bargauge"
				}
			],
			"title": "Top Pages",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 21
			},
			"id": 31,
			"panels": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "palette-classic"
							},
							"custom": {
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								}
							},
							"mappings": [],
							"min": 0,
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "blue",
										"value": null
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 15,
						"x": 1,
						"y": 47
					},
					"id": 15,
					"options": {
						"basemap": {
							"config": {},
							"name": "Layer 0",
							"type": "default"
						},
						"controls": {
							"mouseWheelZoom": false,
							"showAttribution": true,
							"showDebug": false,
							"showMeasure": false,
							"showScale": false,
							"showZoom": true
						},
						"layers": [
							{
								"config": {
									"showLegend": false,
									"style": {
										"color": {
											"fixed": "light-blue"
										},
										"opacity": 0.5,
										"rotation": {
											"fixed": 0,
											"max": 360,
											"min": -360,
											"mode": "mod"
										},
										"size": {
											"field": "pageview",
											"fixed": 5,
											"max": 15,
											"min": 3
										},
										"symbol": {
											"fixed": "img/icons/marker/triangle.svg",
											"mode": "fixed"
										},
										"symbolAlign": {
											"horizontal": "center",
											"vertical": "center"
										},
										"text": {
											"field": "pageview",
											"fixed": "",
											"mode": "fixed"
										},
										"textConfig": {
											"fontSize": 10,
											"offsetX": 0,
											"offsetY": 0,
											"textAlign": "center",
											"textBaseline": "middle"
										}
									}
								},
								"filterData": {
									"id": "byRefId",
									"options": "A"
								},
								"location": {
									"gazetteer": "public/gazetteer/countries.json",
									"lookup": "country_code",
									"mode": "lookup"
								},
								"name": "Layer 1",
								"opacity": 1,
								"tooltip": true,
								"type": "markers"
							}
						],
						"tooltip": {
							"mode": "details"
						},
						"view": {
							"allLayers": true,
							"id": "fit",
							"lat": 0,
							"lon": 0,
							"zoom": 10
						}
					},
					"pluginVersion": "11.0.0",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 100,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH sessions_locations AS (\n  SELECT argMax(country_code, pageviews) AS country_code\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT country_code, COUNT(*) AS pageview\nFROM sessions_locations\nWHERE $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nGROUP BY country_code",
							"refId": "A"
						}
					],
					"transparent": true,
					"type": "geomap"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Top 10 of visitors' locations.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "continuous-BlPu"
							},
							"displayName": "${__field.labels[country_code]}",
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "red",
										"value": null
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 7,
						"x": 16,
						"y": 47
					},
					"id": 18,
					"options": {
						"displayMode": "lcd",
						"maxVizHeight": 41,
						"minVizHeight": 16,
						"minVizWidth": 8,
						"namePlacement": "auto",
						"orientation": "horizontal",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "",
							"limit": 10,
							"values": true
						},
						"showUnfilled": true,
						"sizing": "manual",
						"valueMode": "color"
					},
					"pluginVersion": "11.0.0",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"hide": false,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 100,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH sessions_locations AS (\n  SELECT argMax(country_code, pageviews) AS country_code\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT name AS country, COUNT(*) AS session_count\nFROM sessions_locations\nJOIN countries ON sessions_locations.country_code = countries.code\nWHERE $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nGROUP BY country\nORDER BY session_count DESC",
							"refId": "A"
						}
					],
					"title": "Top Locations",
					"transformations": [
						{
							"id": "rowsToFields",
							"options": {
								"mappings": [
									{
										"fieldName": "country_code",
										"handlerKey": "field.name"
									},
									{
										"fieldName": "pageview",
										"handlerKey": "field.value"
									}
								]
							}
						}
					],
					"type": "bargauge"
				}
			],
			"title": "Locations",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 22
			},
			"id": 32,
			"panels": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Distribution of browser family among your site visitors.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"fixedColor": "blue",
								"mode": "shades"
							},
							"custom": {
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								}
							},
							"displayName": "${__field.labels[browser_family]}",
							"fieldMinMax": false,
							"mappings": [],
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 11,
						"x": 1,
						"y": 61
					},
					"id": 4,
					"options": {
						"displayLabels": [
							"name",
							"percent"
						],
						"legend": {
							"displayMode": "list",
							"placement": "bottom",
							"showLegend": true,
							"values": []
						},
						"pieType": "pie",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "/^COUNT\\(browser\\)$/",
							"values": true
						},
						"tooltip": {
							"maxHeight": 600,
							"mode": "single",
							"sort": "none"
						}
					},
					"pluginVersion": "10.3.3",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"aggregates": [],
									"columns": [
										{
											"hint": "time",
											"name": "timestamp",
											"type": "DateTime('UTC')"
										}
									],
									"database": "prisme",
									"filters": [
										{
											"condition": "AND",
											"filterType": "custom",
											"hint": "time",
											"key": "timestamp",
											"operator": "WITH IN DASHBOARD TIME RANGE",
											"restrictToFields": [
												{
													"label": "timestamp",
													"name": "timestamp",
													"picklistValues": [],
													"type": "DateTime('UTC')"
												}
											],
											"type": "datetime"
										}
									],
									"limit": 100,
									"mode": "trend",
									"orderBy": [],
									"queryType": "timeseries",
									"table": "pageviews"
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH sessions_browsers AS (\n  SELECT argMax(browser_family, pageviews) AS browser\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT browser, COUNT(browser)\nFROM sessions_browsers\nGROUP BY browser",
							"refId": "A"
						}
					],
					"title": "Browsers",
					"type": "piechart"
				},
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Distribution of Operating System (OS) among your site visitors.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"fixedColor": "purple",
								"mode": "shades"
							},
							"custom": {
								"hideFrom": {
									"legend": false,
									"tooltip": false,
									"viz": false
								}
							},
							"displayName": "${__field.labels[os]}",
							"mappings": [],
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 11,
						"x": 12,
						"y": 61
					},
					"id": 5,
					"options": {
						"displayLabels": [
							"percent",
							"name"
						],
						"legend": {
							"displayMode": "list",
							"placement": "bottom",
							"showLegend": true
						},
						"pieType": "pie",
						"reduceOptions": {
							"calcs": [
								"sum"
							],
							"fields": "/^COUNT\\(os\\)$/",
							"values": true
						},
						"tooltip": {
							"maxHeight": 600,
							"mode": "single",
							"sort": "none"
						}
					},
					"pluginVersion": "10.2.2",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "prisme",
									"filters": [
										{
											"condition": "AND",
											"filterType": "custom",
											"key": "timestamp",
											"operator": "WITH IN DASHBOARD TIME RANGE",
											"restrictToFields": [
												{
													"label": "timestamp",
													"name": "timestamp",
													"picklistValues": [],
													"type": "DateTime('UTC')"
												}
											],
											"type": "datetime"
										}
									],
									"limit": 100,
									"mode": "list",
									"orderBy": [],
									"queryType": "table",
									"table": "pageviews"
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "WITH sessions_os AS (\n  SELECT argMax(operating_system, pageviews) AS os\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n  GROUP BY session_uuid\n)\nSELECT os, COUNT(os)\nFROM sessions_os\nGROUP BY os",
							"refId": "A"
						}
					],
					"title": "Operating Systems (OS)",
					"type": "piechart"
				}
			],
			"title": "Devices",
			"type": "row"
		},
		{
			"collapsed": true,
			"gridPos": {
				"h": 1,
				"w": 24,
				"x": 0,
				"y": 23
			},
			"id": 34,
			"panels": [
				{
					"datasource": {
						"type": "grafana-clickhouse-datasource",
						"uid": "{{ .DatasourceClickhouseUid }}"
					},
					"description": "Top 10 of most triggered custom events.",
					"fieldConfig": {
						"defaults": {
							"color": {
								"mode": "continuous-BlPu"
							},
							"displayName": "${__field.labels[name]}",
							"mappings": [],
							"thresholds": {
								"mode": "absolute",
								"steps": [
									{
										"color": "green",
										"value": null
									},
									{
										"color": "red",
										"value": 80
									}
								]
							},
							"unit": "short"
						},
						"overrides": []
					},
					"gridPos": {
						"h": 13,
						"w": 11,
						"x": 1,
						"y": 75
					},
					"id": 21,
					"options": {
						"displayMode": "lcd",
						"maxVizHeight": 41,
						"minVizHeight": 25,
						"minVizWidth": 8,
						"namePlacement": "auto",
						"orientation": "horizontal",
						"reduceOptions": {
							"calcs": [
								"lastNotNull"
							],
							"fields": "",
							"limit": 10,
							"values": true
						},
						"showUnfilled": true,
						"sizing": "manual",
						"valueMode": "color"
					},
					"pluginVersion": "11.0.0",
					"targets": [
						{
							"datasource": {
								"type": "grafana-clickhouse-datasource",
								"uid": "{{ .DatasourceClickhouseUid }}"
							},
							"editorType": "sql",
							"format": 1,
							"meta": {
								"builderOptions": {
									"columns": [],
									"database": "",
									"limit": 1000,
									"mode": "list",
									"queryType": "table",
									"table": ""
								}
							},
							"pluginVersion": "4.0.8",
							"queryType": "table",
							"rawSql": "SELECT name, COUNT(*) AS count\nFROM events_custom\nWHERE $__timeFilter(timestamp)\nAND domain IN (${domains:sqlstring})\nAND path IN (${paths:sqlstring})\nAND session_uuid IN (\n  SELECT session_uuid FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  AND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\n  AND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\n  AND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\n  AND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\n  AND $__conditionalAll(utm_content IN (${utm_contents:sqlstring}), ${utm_contents})\n)\nGROUP BY name\nORDER BY count DESC",
							"refId": "A"
						}
					],
					"title": "Top Custom Events",
					"type": "bargauge"
				}
			],
			"title": "Custom Events",
			"type": "row"
		}
	],
	"refresh": "",
	"schemaVersion": 39,
	"tags": [],
	"templating": {
		"list": [
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(domain) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))",
				"description": "Website domains.",
				"hide": 0,
				"includeAll": true,
				"label": "Domains",
				"multi": true,
				"name": "domains",
				"options": [],
				"query": "SELECT DISTINCT(domain) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 1,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(entry_path, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nGROUP BY session_uuid",
				"description": "Path of first page viewed by visitors.",
				"hide": 0,
				"includeAll": true,
				"label": "Entry Paths",
				"multi": true,
				"name": "entry_paths",
				"options": [],
				"query": "SELECT DISTINCT(argMax(entry_path, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nGROUP BY session_uuid",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"allValue": "",
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(operating_system, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nGROUP BY session_uuid\n\n",
				"description": "Visitors operating systems.",
				"hide": 0,
				"includeAll": true,
				"label": "Operating Systems (OS)",
				"multi": true,
				"name": "operating_systems",
				"options": [],
				"query": "SELECT DISTINCT(argMax(operating_system, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nGROUP BY session_uuid\n\n",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 1,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(browser_family, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nGROUP BY session_uuid\n",
				"description": "Visitors browsers.",
				"hide": 0,
				"includeAll": true,
				"label": "Browsers",
				"multi": true,
				"name": "browsers",
				"options": [],
				"query": "SELECT DISTINCT(argMax(browser_family, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nGROUP BY session_uuid\n",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 1,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(referrer_domain, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nGROUP BY session_uuid",
				"description": "Domain from which visitor page was requested.",
				"hide": 0,
				"includeAll": true,
				"label": "Referrals",
				"multi": true,
				"name": "referrals",
				"options": [],
				"query": "SELECT DISTINCT(argMax(referrer_domain, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nGROUP BY session_uuid",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "WITH sessions_locations AS (\n  SELECT argMax(country_code, pageviews) AS country_code\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  GROUP BY session_uuid\n)\nSELECT name AS country\nFROM sessions_locations\nJOIN countries ON sessions_locations.country_code = countries.code\nGROUP BY country",
				"description": "Visitor location.",
				"hide": 0,
				"includeAll": true,
				"label": "Locations",
				"multi": true,
				"name": "countries_name",
				"options": [],
				"query": "WITH sessions_locations AS (\n  SELECT argMax(country_code, pageviews) AS country_code\n  FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  GROUP BY session_uuid\n)\nSELECT name AS country\nFROM sessions_locations\nJOIN countries ON sessions_locations.country_code = countries.code\nGROUP BY country",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 1,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT code FROM countries\nWHERE name IN (${countries_name:sqlstring})",
				"hide": 2,
				"includeAll": true,
				"multi": true,
				"name": "locations",
				"options": [],
				"query": "SELECT code FROM countries\nWHERE name IN (${countries_name:sqlstring})",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(exit_path, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nGROUP BY session_uuid",
				"description": "Path of the last page viewed by visitors.",
				"hide": 0,
				"includeAll": true,
				"label": "Exit Paths",
				"multi": true,
				"name": "exit_paths",
				"options": [],
				"query": "SELECT DISTINCT(argMax(exit_path, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nGROUP BY session_uuid",
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"allValue": "",
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(path) FROM pageviews\nWHERE $__timeFilter(timestamp)\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND session_uuid IN (\n  SELECT argMax(session_uuid, pageviews) FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  GROUP BY session_uuid\n)\n",
				"description": "URL path names.",
				"hide": 0,
				"includeAll": true,
				"label": "Paths",
				"multi": true,
				"name": "paths",
				"options": [],
				"query": "SELECT DISTINCT(path) FROM pageviews\nWHERE $__timeFilter(timestamp)\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND session_uuid IN (\n  SELECT argMax(session_uuid, pageviews) FROM sessions\n  WHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\n  AND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\n  AND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\n  AND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\n  AND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\n  AND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\n  AND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\n  AND $__conditionalAll(exit_path IN (${exit_paths:sqlstring}), ${exit_paths})\n  GROUP BY session_uuid\n)\n",
				"refresh": 2,
				"regex": "",
				"skipUrlSync": false,
				"sort": 1,
				"type": "query"
			},
			{
				"allValue": "",
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(utm_source, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND utm_source != ''\nGROUP BY session_uuid",
				"description": "Identifies which site sent the traffic, and is a required parameter.",
				"hide": 0,
				"includeAll": true,
				"label": "UTM Source",
				"multi": true,
				"name": "utm_sources",
				"options": [],
				"query": "SELECT DISTINCT(argMax(utm_source, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND utm_source != ''\nGROUP BY session_uuid",
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(utm_medium, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND utm_medium != ''\nGROUP BY session_uuid",
				"description": "Identifies what type of link was used, such as email or pay-per-click advertising. ",
				"hide": 0,
				"includeAll": true,
				"label": "UTM Medium",
				"multi": true,
				"name": "utm_mediums",
				"options": [],
				"query": "SELECT DISTINCT(argMax(utm_medium, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND utm_medium != ''\nGROUP BY session_uuid",
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(utm_campaign, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND utm_campaign != ''\nGROUP BY session_uuid",
				"description": "Identifies a specific product promotion or strategic campaign. ",
				"hide": 0,
				"includeAll": true,
				"label": "UTM Campaign",
				"multi": true,
				"name": "utm_campaigns",
				"options": [],
				"query": "SELECT DISTINCT(argMax(utm_campaign, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND utm_campaign != ''\nGROUP BY session_uuid",
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(utm_term, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND utm_term != ''\nGROUP BY session_uuid",
				"description": "Identifies search terms.",
				"hide": 0,
				"includeAll": true,
				"label": "UTM Term",
				"multi": true,
				"name": "utm_terms",
				"options": [],
				"query": "SELECT DISTINCT(argMax(utm_term, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND utm_term != ''\nGROUP BY session_uuid",
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			},
			{
				"current": {
					"selected": true,
					"text": [
						"All"
					],
					"value": [
						"$__all"
					]
				},
				"datasource": {
					"type": "grafana-clickhouse-datasource",
					"uid": "{{ .DatasourceClickhouseUid }}"
				},
				"definition": "SELECT DISTINCT(argMax(utm_content, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND utm_content != ''\nGROUP BY session_uuid",
				"description": "Identifies what specifically was clicked to bring the user to the site, such as a banner ad or a text link.",
				"hide": 0,
				"includeAll": true,
				"label": "UTM Content",
				"multi": true,
				"name": "utm_contents",
				"options": [],
				"query": "SELECT DISTINCT(argMax(utm_content, pageviews)) FROM sessions\nWHERE ($__timeFilter(session_timestamp) OR $__timeFilter(exit_timestamp))\nAND $__conditionalAll(domain IN (${domains:sqlstring}), ${domains})\nAND $__conditionalAll(entry_path IN (${entry_paths:sqlstring}), ${entry_paths})\nAND $__conditionalAll(operating_system IN (${operating_systems:sqlstring}), ${operating_systems})\nAND $__conditionalAll(browser_family IN (${browsers:sqlstring}), ${browsers})\nAND $__conditionalAll(referrer_domain IN (${referrals:sqlstring}), ${referrals})\nAND $__conditionalAll(country_code IN (${locations:sqlstring}), ${countries_name})\nAND $__conditionalAll(utm_source IN (${utm_sources:sqlstring}), ${utm_sources})\nAND $__conditionalAll(utm_medium IN (${utm_mediums:sqlstring}), ${utm_mediums})\nAND $__conditionalAll(utm_campaign IN (${utm_campaigns:sqlstring}), ${utm_campaigns})\nAND $__conditionalAll(utm_term IN (${utm_terms:sqlstring}), ${utm_terms})\nAND utm_content != ''\nGROUP BY session_uuid",
				"refresh": 1,
				"regex": "",
				"skipUrlSync": false,
				"sort": 0,
				"type": "query"
			}
		]
	},
	"time": {
		"from": "now-7d",
		"to": "now"
	},
	"timeRangeUpdatedDuringEditOrView": false,
	"timepicker": {
		"refresh_intervals": [
			"5m",
			"15m",
			"30m",
			"1h",
			"2h",
			"1d"
		]
	},
	"timezone": "",
	"title": "Web Analytics",
	"weekStart": ""
}
