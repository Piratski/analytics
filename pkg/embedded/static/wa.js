(function(){var d,p,_=document,C="addEventListener",b=_[C],E=document.currentScript,e=location,t=E.dataset,S=new URL(E.src),D=e.protocol,n=globalThis,c=n.fetch,r=n.history,s="visitorId",a="target",y=t.prismeUrl||S.origin,j=y.concat("/api/v1/events"),N=j.concat("/clicks"),g=t.domain||e.host,z=t.path||e.pathname,i=!!t.manual&&t.manual!=="false"||!1,k=t[s],f=t.outboundLinks!=="false",m=t.fileDownloads!=="false",T=(t.extraDownloadsFileTypes||"").split(","),O=_.referrer.replace(e.host,g),x=1,F="Request"in n&&"keepalive"in new Request(""),A=["7z","avi","csv","dmg","docx","exe","gz","key","midi","mov","mp3","mp4","mpeg","pdf","pkg","pps","ppt","pptx","rar","rtf","txt","wav","wma","wmv","xlsx","zip"].concat(T);function l(t){return t||(t={}),t.domain||(i?t.domain=e.host:t.domain=g),t.path||(i||x>1?t.path=e.pathname:t.path=z),t[s]||(t[s]=k),t.url=D.concat("//",t.domain,t.path,e.search),t}function h(e,t){return t["Access-Control-Max-Age"]=3600,t["X-Prisme-Referrer"]=e.url,e[s]&&(t["X-Prisme-Visitor-Id"]=e[s].toString()),t}function u(e){return Object.assign({},{method:"POST",referrerPolicy:"no-referrer-when-downgrade",keepalive:!0},e)}function M(e,t){if(e.defaultPrevented)return!1;var n=!t[a]||t[a].match(/^_(self|parent|top)$/i),s=!(e.ctrlKey||e.metaKey||e.shiftKey)&&e.type==="click";return n&&s}function o(e){e=l(e),c(j.concat("/pageviews"),u({headers:h(e,{"X-Prisme-Document-Referrer":O})})),O=e.url,x++}function w(e,t,n){return n=l(n),c(N.concat(e),u({headers:h(n,{}),body:t}))}function v(t){if(t.type==="auxclick"&&t.button!==1||!(t[a]instanceof Element))return;var s,i,r,o=t[a].closest("a");if(!o)return;if(s=new URL(o.href||"",e.origin),s.search="",f&&s.host!==e.host){i=!F&&M(t,s),r=!1;function c(){!r&&i&&(r=!0,n.location.assign(s))}i&&(t.preventDefault(),setTimeout(c,5e3)),w("/outbound-link",s).finally(c)}if(m&&(A.includes(s.pathname.split(".").pop())||o.getAttribute("download")!==null))return w("/file-download",s)}!i&&(f||m)&&(b("click",v),b("auxclick",v)),d={pageview:o,trigger(e,t,n){n=l(n),c(y.concat("/api/v1/events/custom/",e),u({headers:h(n,{"Content-Type":"application/json"}),body:JSON.stringify(t)}))}},n.prisme=d,i||(delete d.pageview,o(),r&&(p=r.pushState,r.pushState=function(){p.apply(r,arguments),o()},n[C]("popstate",o)))})()