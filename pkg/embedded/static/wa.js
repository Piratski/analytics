(function(){var m,r=document.currentScript,e=location,t=r.dataset,g=new URL(r.src),c="no-referrer-when-downgrade",i="POST",f=e.protocol,a=t.prismeUrl||g.origin,o=t.domain||e.host,p=t.path||e.pathname,s=!!t.manual||!1,l=document.referrer.replace(e.host,o),d=1;function u(t){return t||(t={}),t.domain||(s?t.domain=e.host:t.domain=o),t.path||(s||d>1?t.path=e.pathname:t.path=p),t.url=f.concat("//",t.domain,t.path,e.search),t}function h(e,t){return t["Access-Control-Max-Age"]=3600,t["X-Prisme-Referrer"]=e.url,e.visitorId&&(t["X-Prisme-Visitor-Id"]=e.visitorId.toString(),e.anonymous==!0&&(t["X-Prisme-Visitor-Anon"]="1")),t}function n(e){e=u(e),fetch(a.concat("/api/v1/events/pageviews"),{method:i,headers:h(e,{"X-Prisme-Document-Referrer":l}),keepalive:!0,referrerPolicy:c}),l=e.url,d++}window.prisme={pageview:n,trigger(e,t,n){n=u(n),fetch(a.concat("/api/v1/events/custom/",e),{method:i,headers:h(n,{"Content-Type":"application/json"}),keepalive:!0,referrerPolicy:c,body:JSON.stringify(t)})}},s||(delete window.prisme.pageview,n(),window.history&&(m=window.history.pushState,window.history.pushState=function(){m.apply(window.history,arguments),n()},window.addEventListener("popstate",n)))})()