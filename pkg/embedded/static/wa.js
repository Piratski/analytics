(function(){var o,i,l,f,u=document.currentScript,e=location,t=u.dataset,v=new URL(u.src),a="no-referrer-when-downgrade",d="POST",g=e.protocol,r=t.prismeUrl||v.origin,c=t.domain||e.host,p=t.path||e.pathname,n=!!t.manual&&t.manual!=="false"||!1;console.log("manual",n),l=t.visitorId,i=document.referrer.replace(e.host,c),o=1;function h(t){return t||(t={}),t.domain||(n?t.domain=e.host:t.domain=c),t.path||(n||o>1?t.path=e.pathname:t.path=p),t.visitorId||(t.visitorId=l),t.url=g.concat("//",t.domain,t.path,e.search),t}function m(e,t){return t["Access-Control-Max-Age"]=3600,t["X-Prisme-Referrer"]=e.url,e.visitorId&&(t["X-Prisme-Visitor-Id"]=e.visitorId.toString()),t}function s(e){e=h(e),fetch(r.concat("/api/v1/events/pageviews"),{method:d,headers:m(e,{"X-Prisme-Document-Referrer":i}),keepalive:!0,referrerPolicy:a}),i=e.url,o++}window.prisme={pageview:s,trigger(e,t,n){n=h(n),fetch(r.concat("/api/v1/events/custom/",e),{method:d,headers:m(n,{"Content-Type":"application/json"}),keepalive:!0,referrerPolicy:a,body:JSON.stringify(t)})}},n||(delete window.prisme.pageview,s(),window.history&&(f=window.history.pushState,window.history.pushState=function(){f.apply(window.history,arguments),s()},window.addEventListener("popstate",s)))})()