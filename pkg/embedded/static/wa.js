(function(){var m,b=document.currentScript,e=location,t=b.dataset,w=new URL(b.src),i="no-referrer-when-downgrade",a="POST",_=e.protocol,c=t.prismeUrl||w.origin,y=t.domain||e.host,x=t.path||e.pathname,o=!!t.manual&&t.manual!=="false"||!1,O=t.visitorId,h=t.outboundLinks!=="false",E=t.fileDownloads!=="false",C=(t.extraDownloadsFileTypes||"").split(","),p=document.referrer.replace(e.host,y),g=1,n=globalThis,d="Request"in n&&"keepalive"in new Request(""),u=["7z","avi","csv","dmg","docx","exe","gz","key","midi","mov","mp3","mp4","mpeg","pdf","pkg","pps","ppt","pptx","rar","rtf","txt","wav","wma","wmv","xlsx","zip"].concat(C);function l(t){return t||(t={}),t.domain||(o?t.domain=e.host:t.domain=y),t.path||(o||g>1?t.path=e.pathname:t.path=x),t.visitorId||(t.visitorId=O),t.url=_.concat("//",t.domain,t.path,e.search),t}function r(e,t){return t["Access-Control-Max-Age"]=3600,t["X-Prisme-Referrer"]=e.url,e.visitorId&&(t["X-Prisme-Visitor-Id"]=e.visitorId.toString()),t}function s(e){e=l(e),fetch(c.concat("/api/v1/events/pageviews"),{method:a,headers:r(e,{"X-Prisme-Document-Referrer":p}),keepalive:!0,referrerPolicy:i}),p=e.url,g++}function j(e){return e=l(e),fetch(c.concat("/api/v1/events/clicks"),{method:a,headers:r(e,{"Content-Type":"application/json"}),keepalive:!0,referrerPolicy:i,body:JSON.stringify({tag:e.tag,attr:e.attr})})}function v(e,t,s){var o=d,i=()=>{o||(o=!0,n.location.assign(t))};d||(e.preventDefault(),setTimeout(i,5e3)),j(s).finally(i)}function f(t){if(t.type==="auxclick"&&t.button!==1||!(t.target instanceof Element))return;var n,s=t.target.closest("a");if(!s)return;n=new URL(s.href||"",e.origin),n.search="",h&&n.host!==e.host&&v(t,n,{tag:"a",attr:n.href}),console.log(s.getAttribute("download"),u.includes(n.pathname.split(".").pop())),E&&(s.getAttribute("download")!==null||u.includes(n.pathname.split(".").pop()))&&v(t,n,{tag:"a",attr:n.href})}h&&(document.addEventListener("click",f),document.addEventListener("auxclick",f)),n.prisme={pageview:s,trigger(e,t,n){n=l(n),fetch(c.concat("/api/v1/events/custom/",e),{method:a,headers:r(n,{"Content-Type":"application/json"}),keepalive:!0,referrerPolicy:i,body:JSON.stringify(t)})},click:j},o||(delete n.prisme.pageview,s(),n.history&&(m=n.history.pushState,n.history.pushState=function(){m.apply(n.history,arguments),s()},n.addEventListener("popstate",s)))})()