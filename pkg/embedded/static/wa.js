(function(){var d,p,u=document,E="addEventListener",C=u[E],x=document.currentScript,e=location,t=x.dataset,D=new URL(x.src),z=e.protocol,n=globalThis,l=n.fetch,r=n.history,s="visitorId",i="target",m=t.prismeUrl||D.origin,v=m.concat("/api/v1/events"),g=t.domain||e.host,k=t.path||e.pathname,o=!!t.manual&&t.manual!=="false"||!1,T=t[s],j=t.outboundLinks!=="false",y=t.fileDownloads!=="false",F=(t.extraDownloadsFileTypes||"").split(","),w=u.referrer.replace(e.host,g),O=1,M="Request"in n&&"keepalive"in new Request(""),A=["7z","avi","csv","dmg","docx","exe","gz","key","midi","mov","mp3","mp4","mpeg","pdf","pkg","pps","ppt","pptx","rar","rtf","txt","wav","wma","wmv","xlsx","zip"].concat(F);function f(t){return t||(t={}),t.domain||(o?t.domain=e.host:t.domain=g),t.path||(o||O>1?t.path=e.pathname:t.path=k),t[s]||(t[s]=T),t.url=z.concat("//",t.domain,t.path,e.search),t}function c(e,t){return t["Access-Control-Max-Age"]=3600,t["X-Prisme-Referrer"]=e.url,e[s]&&(t["X-Prisme-Visitor-Id"]=e[s].toString()),t}function h(e){return Object.assign({},{method:"POST",referrerPolicy:"no-referrer-when-downgrade",keepalive:!0},e)}function S(e,t){if(e.defaultPrevented)return!1;var n=!t[i]||t[i].match(/^_(self|parent|top)$/i),s=!(e.ctrlKey||e.metaKey||e.shiftKey)&&e.type==="click";return n&&s}function a(e){e=f(e),l(v.concat("/pageviews"),h({headers:c(e,{"X-Prisme-Document-Referrer":w})})),w=e.url,O++}function _(e,t,n){return n=f(n),l(v.concat(e),h({headers:c(n,{}),body:t}))}function b(t){if(t.type==="auxclick"&&t.button!==1||!(t[i]instanceof Element))return;var s,a,r,o=t[i].closest("a");if(!o)return;if(s=new URL(o.href||"",e.origin),s.search="",j&&s.host!==e.host){a=!M&&S(t,s),r=!1;function c(){!r&&a&&(r=!0,n.location.assign(s))}a&&(t.preventDefault(),setTimeout(c,5e3)),_("/outbound-link",s).finally(c)}if(y&&(A.includes(s.pathname.split(".").pop())||o.getAttribute("download")!==null))return _("/file-download",s)}!o&&(j||y)&&(C("click",b),C("auxclick",b)),d={pageview:a,trigger(e,t,n){n=f(n),l(m.concat("/api/v1/events/custom/",e),h({headers:c(n,{"Content-Type":"application/json"}),body:JSON.stringify(t)}))}},n.prisme=d,u.querySelectorAll("a[ping]").forEach(function(e){e.ping=e.ping.split(" ").filter(e=>!e.includes(m)).join(" ")}),o||(delete d.pageview,a(),r&&(p=r.pushState,r.pushState=function(){p.apply(r,arguments),a()},n[E]("popstate",a)))})()